# Задача о двух роботах на бесконечной ленте

На бесконечной в обе стороны белой полоске, размеченной на клетки, находятся два идентичных робота. Ровно одна из клеток — чёрная, и она расположена **между** роботами. Требуется составить **одну и ту же конечную программу** для обоих роботов так, чтобы они гарантированно встретились.

## Доступные команды

Программа состоит из строк, каждая из которых содержит ровно одну из следующих команд:

- `ML` — сделать шаг на одну клетку влево и перейти к следующей строке программы.
- `MR` — сделать шаг на одну клетку вправо и перейти к следующей строке программы.
- `IF FLAG` — проверить, находится ли робот на чёрной клетке:
    - если **да**, перейти к следующей строке;
    - если **нет**, пропустить следующую строку и перейти к послеследующей.
- `GOTO N` — мгновенно перейти к строке с номером `N`.

> **Время выполнения:**  
> Все команды, кроме `GOTO`, выполняются за 1 секунду. Команда `GOTO` выполняется мгновенно.

---

## Ответ

**Задача неразрешима при заданных ограничениях.**

Ни одна одинаковая детерминированная программа, составленная из приведённых команд, не может гарантировать встречу роботов ни на чёрной, ни на какой-либо белой клетке для всех возможных начальных позиций.

### Почему это невозможно? Доказательство в 2 этапа

Доказательство строится на анализе двух ключевых аспектов: поведения робота на однородной (белой) части ленты и последствий симметрии системы.

#### Этап 1: Невозможно гарантировать встречу на чёрной клетке

Пока робот находится на белой клетке, команда `IF FLAG` всегда возвращает «нет». Это означает, что его поведение полностью определяется программой и не зависит от его местоположения. Движение робота по бесконечной белой ленте может быть только одного из трёх типов:

1.  **Бесконечный уход влево:** Программа заставляет робота в конечном итоге двигаться только влево.
2.  **Бесконечный уход вправо:** Программа заставляет робота двигаться только вправо.
3.  **Циклическое движение:** Робот перемещается взад-вперёд в пределах некоторого ограниченного интервала (совершает «маятниковое» движение).

Теперь рассмотрим, как это влияет на роботов в нашей задаче:
-   Если программа приводит к **уходу вправо**, то робот, изначально стоящий **справа** от чёрной клетки, будет только удаляться от неё и никогда её не достигнет.
-   Аналогично, при **уходе влево** робот, стоящий **слева**, никогда не дойдёт до цели.
-   Если программа заставляет робота **двигаться циклически** в интервале длиной `L`, то для любого из роботов можно выбрать начальную позицию на расстоянии **больше `L`** от чёрной клетки. В этом случае робот будет вечно «качаться» в своём локальном интервале, так и не добравшись до чёрной клетки.

**Промежуточный вывод:** Для любой программы можно подобрать такие начальные позиции, при которых **хотя бы один из роботов гарантированно не достигнет чёрной клетки**. Следовательно, стратегия «встретиться на чёрной клетке» неработоспособна.

#### Этап 2: Невозможно гарантировать встречу на белой клетке

Остаётся вопрос: а могут ли роботы встретиться на какой-нибудь белой клетке? Ответ — нет, и это доказывается через симметрию.

Представим, что мы расставляем роботов на ленте **зеркально-симметрично** относительно чёрной клетки. Например, если чёрная клетка — это позиция 0, то роботы ставятся в позиции `-k` и `+k` на одинаковом расстоянии `k`.

Поскольку оба робота:
-   идентичны,
-   выполняют одну и ту же программу,
-   начинают в одном и том же внутреннем состоянии (строка 1 программы),
-   находятся в одинаковом окружении (белые клетки),

...их поведение на каждом шаге будет абсолютно симметричным.
-   Если программа велит сделать шаг (`ML` или `MR`), то один робот сдвинется, например, влево (к центру), а второй — вправо (тоже к центру). Их позиции станут `-(k-1)` и `+(k-1)`. Симметрия сохранится.
-   Команды `GOTO` и `IF FLAG` (которая на белых клетках даёт одинаковый результат для обоих) изменяют внутреннее состояние роботов синхронно и одинаково, также сохраняя симметрию.

**Ключевое следствие:** При симметричной начальной расстановке позиции роботов на любом шаге `t` будут `P_left(t) = -P_right(t)`. Они могут встретиться, только если их позиции совпадут: `P_left(t) = P_right(t)`. Это равенство выполняется только при `P = 0`, то есть **только на чёрной клетке**. Встреча на белой клетке в симметричном сценарии невозможна.

### Итоговый вывод

Соединим выводы обоих этапов:

1.  Из **Этапа 2** мы знаем, что если расставить роботов симметрично, то единственное место, где они теоретически могли бы встретиться — это чёрная клетка.
2.  Из **Этапа 1** мы знаем, что для любой программы можно выбрать такое начальное расстояние (в том числе симметричное), что роботы **никогда не достигнут чёрной клетки**.

Таким образом, для **любой** предложенной программы можно создать такие начальные условия (симметричные и достаточно удалённые от центра), при которых встреча становится невозможной в принципе. Роботы не смогут встретиться на белой клетке из-за симметрии и не смогут достичь чёрной клетки из-за ограниченности своей траектории.

---

### Как сделать задачу разрешимой?

Для гарантированной встречи роботов необходимо нарушить исходную симметрию или добавить новые возможности, например:

-   **Возможность оставлять метки:** Если робот может изменять цвет клетки (например, оставить вторую метку), он может нарушить однородность среды.
-   **Разные программы или ID у роботов:** Если один робот будет «знать», что он левый, а другой — что он правый, симметрия нарушается.
-   **Случайность:** Введение в программу случайного элемента (например, «с вероятностью 50% шагнуть влево, иначе вправо») могло бы помочь, так как траектории роботов перестали бы быть зеркальными.
-   **Ограничение начального расстояния:** Если бы было известно, что расстояние до чёрной клетки не превышает `N`, можно было бы написать программу с циклом, гарантирующим её нахождение.
-   **Дополнительные сенсоры:** Возможность видеть другого робота на расстоянии или иметь «компас» для глобальной ориентации.```